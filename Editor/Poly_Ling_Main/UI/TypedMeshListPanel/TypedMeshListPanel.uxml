<ui:UXML xmlns:ui="UnityEngine.UIElements" xmlns:uie="UnityEditor.UIElements">
    <!-- 
    TypedMeshListPanel.uxml
    タイプ別メッシュリストパネル
    Phase BonePose: BonePoseData/BindPoseサブパネル追加
    -->
    
    <ui:VisualElement name="typed-list-root" class="typed-list-root">
        
        <!-- タブヘッダー -->
        <ui:VisualElement name="tab-header" class="tab-header">
            <ui:Button name="tab-drawable" text="メッシュ" tooltip="Mesh + BakedMirror" class="tab-button tab-active" />
            <ui:Button name="tab-bone" text="ボーン" tooltip="Bone" class="tab-button" />
            <ui:Button name="tab-morph" text="モーフ" tooltip="Morph" class="tab-button" />
        </ui:VisualElement>
        
        <!-- メインコンテンツ -->
        <ui:VisualElement name="main-content" class="main-content">
            
            <!-- ヘッダー -->
            <ui:VisualElement name="header" class="header">
                <ui:Label name="count-label" text="Items: 0" class="header-label" />
                <ui:VisualElement style="flex-grow: 1;" />
                <ui:Toggle name="show-info-toggle" label="Info" value="true" class="header-toggle" />
                <ui:Button name="btn-add" text="+" tooltip="新規追加" class="header-button" />
            </ui:VisualElement>
            
            <!-- ツリービュー -->
            <ui:TreeView name="mesh-tree" 
                         selection-type="Multiple"
                         class="mesh-tree" />
            
            <!-- ツールバー -->
            <ui:VisualElement name="toolbar" class="toolbar">
                <ui:VisualElement class="toolbar-group">
                    <ui:Button name="btn-up" text="↑" tooltip="上へ移動" class="toolbar-button" />
                    <ui:Button name="btn-down" text="↓" tooltip="下へ移動" class="toolbar-button" />
                    <ui:VisualElement class="toolbar-spacer" />
                    <ui:Button name="btn-outdent" text="←" tooltip="階層を上げる" class="toolbar-button" />
                    <ui:Button name="btn-indent" text="→" tooltip="階層を下げる" class="toolbar-button" />
                </ui:VisualElement>
                <ui:VisualElement class="toolbar-group">
                    <ui:Button name="btn-duplicate" text="D" tooltip="複製" class="toolbar-button" />
                    <ui:Button name="btn-delete" text="X" tooltip="削除" class="toolbar-button-danger" />
                </ui:VisualElement>
            </ui:VisualElement>
            
            <!-- 詳細パネル -->
            <ui:Foldout name="detail-foldout" text="詳細" value="true" class="detail-foldout">
                <ui:VisualElement name="detail-panel" class="detail-panel">
                    <ui:TextField name="mesh-name-field" label="名前" class="detail-field" />
                    <ui:VisualElement class="detail-stats">
                        <ui:Label name="vertex-count-label" text="頂点: -" class="stat-label" />
                        <ui:Label name="face-count-label" text="面: -" class="stat-label" />
                    </ui:VisualElement>
                    <ui:VisualElement name="face-breakdown" class="detail-breakdown">
                        <ui:Label name="tri-count-label" text="三角形: -" class="stat-label-small" />
                        <ui:Label name="quad-count-label" text="四角形: -" class="stat-label-small" />
                        <ui:Label name="ngon-count-label" text="多角形: -" class="stat-label-small" />
                    </ui:VisualElement>
                    <ui:VisualElement name="index-info" class="index-info">
                        <ui:Label name="bone-index-label" text="ボーンIdx: -" class="stat-label-small" />
                        <ui:Label name="master-index-label" text="マスターIdx: -" class="stat-label-small" />
                    </ui:VisualElement>
                    <ui:VisualElement class="detail-buttons">
                        <ui:Button name="btn-to-top" text="先頭へ" class="detail-button" />
                        <ui:Button name="btn-to-bottom" text="末尾へ" class="detail-button" />
                    </ui:VisualElement>
                </ui:VisualElement>
            </ui:Foldout>
            
            <!-- ================================================================
                 BonePose セクション（Boneタブ選択時のみ表示）
                 Phase BonePose 追加
                 ================================================================ -->
            <ui:VisualElement name="bone-pose-section" class="bone-pose-section">
                
                <!-- BonePoseData -->
                <ui:Foldout name="pose-foldout" text="Pose (BonePoseData)" value="true" class="pose-foldout">
                    <ui:VisualElement class="pose-panel">
                        
                        <!-- Active トグル -->
                        <ui:VisualElement class="pose-row">
                            <ui:Toggle name="pose-active-toggle" label="Active" class="pose-toggle" />
                        </ui:VisualElement>
                        
                        <!-- RestPose -->
                        <ui:Label text="RestPose" class="pose-section-label" />
                        <ui:VisualElement class="pose-row">
                            <ui:Label text="Pos" class="pose-field-label" />
                            <ui:FloatField name="rest-pos-x" label="X" class="pose-float-field" />
                            <ui:FloatField name="rest-pos-y" label="Y" class="pose-float-field" />
                            <ui:FloatField name="rest-pos-z" label="Z" class="pose-float-field" />
                        </ui:VisualElement>
                        <ui:VisualElement class="pose-row">
                            <ui:Label text="Rot" class="pose-field-label" />
                            <ui:FloatField name="rest-rot-x" label="X" class="pose-float-field" />
                            <ui:FloatField name="rest-rot-y" label="Y" class="pose-float-field" />
                            <ui:FloatField name="rest-rot-z" label="Z" class="pose-float-field" />
                        </ui:VisualElement>
                        <ui:VisualElement class="pose-rot-sliders">
                            <ui:VisualElement class="pose-slider-row">
                                <ui:Label text="X" class="pose-slider-label" />
                                <ui:Slider name="rest-rot-slider-x" low-value="-180" high-value="180" value="0" class="pose-rot-slider" />
                            </ui:VisualElement>
                            <ui:VisualElement class="pose-slider-row">
                                <ui:Label text="Y" class="pose-slider-label" />
                                <ui:Slider name="rest-rot-slider-y" low-value="-180" high-value="180" value="0" class="pose-rot-slider" />
                            </ui:VisualElement>
                            <ui:VisualElement class="pose-slider-row">
                                <ui:Label text="Z" class="pose-slider-label" />
                                <ui:Slider name="rest-rot-slider-z" low-value="-180" high-value="180" value="0" class="pose-rot-slider" />
                            </ui:VisualElement>
                        </ui:VisualElement>
                        <ui:VisualElement class="pose-row">
                            <ui:Label text="Scl" class="pose-field-label" />
                            <ui:FloatField name="rest-scl-x" label="X" class="pose-float-field" />
                            <ui:FloatField name="rest-scl-y" label="Y" class="pose-float-field" />
                            <ui:FloatField name="rest-scl-z" label="Z" class="pose-float-field" />
                        </ui:VisualElement>
                        
                        <!-- レイヤー一覧 -->
                        <ui:Label text="Layers" class="pose-section-label" />
                        <ui:VisualElement name="pose-layers-container" class="pose-layers-container">
                            <ui:Label name="pose-no-layers-label" text="(レイヤーなし)" class="pose-no-layers" />
                        </ui:VisualElement>
                        
                        <!-- 合成結果（読み取り専用） -->
                        <ui:Label text="Result (Blended)" class="pose-section-label" />
                        <ui:VisualElement class="pose-result-row">
                            <ui:Label name="pose-result-pos" text="Pos: (0, 0, 0)" class="pose-result-label" />
                        </ui:VisualElement>
                        <ui:VisualElement class="pose-result-row">
                            <ui:Label name="pose-result-rot" text="Rot: (0, 0, 0)" class="pose-result-label" />
                        </ui:VisualElement>
                        
                        <!-- ボタン -->
                        <ui:VisualElement class="pose-buttons">
                            <ui:Button name="btn-init-pose" text="Init from BoneTransform" tooltip="BoneTransformからBonePoseDataを初期化" class="pose-button" />
                            <ui:Button name="btn-reset-layers" text="Reset Layers" tooltip="全レイヤーをクリア" class="pose-button" />
                        </ui:VisualElement>
                    </ui:VisualElement>
                </ui:Foldout>
                
                <!-- BindPose -->
                <ui:Foldout name="bindpose-foldout" text="BindPose" value="false" class="pose-foldout">
                    <ui:VisualElement class="pose-panel">
                        <ui:VisualElement class="pose-result-row">
                            <ui:Label name="bindpose-pos" text="Pos: (0, 0, 0)" class="pose-result-label" />
                        </ui:VisualElement>
                        <ui:VisualElement class="pose-result-row">
                            <ui:Label name="bindpose-rot" text="Rot: (0, 0, 0)" class="pose-result-label" />
                        </ui:VisualElement>
                        <ui:VisualElement class="pose-result-row">
                            <ui:Label name="bindpose-scl" text="Scl: (1, 1, 1)" class="pose-result-label" />
                        </ui:VisualElement>
                        <ui:VisualElement class="pose-buttons">
                            <ui:Button name="btn-bake-pose" text="Bake Current Pose" tooltip="現在のポーズをBindPoseに焼く" class="pose-button" />
                        </ui:VisualElement>
                    </ui:VisualElement>
                </ui:Foldout>
                
            </ui:VisualElement>
            
        </ui:VisualElement>
        
        <!-- モーフエディタ（Phase MorphEditor v2: UIToolkit ListView） -->
        <ui:VisualElement name="morph-editor" class="morph-editor">
            
            <!-- ======== モーフリスト（ListView＋チェックボックス） ======== -->
            <ui:VisualElement name="morph-list-header" class="header">
                <ui:Label name="morph-count-label" text="モーフ: 0" class="header-label" />
                <ui:VisualElement style="flex-grow: 1;" />
            </ui:VisualElement>
            <ui:ListView name="morph-listview" selection-type="None" class="morph-listview" />
            
            <!-- ======== 変換セクション ======== -->
            <ui:Foldout name="morph-convert-foldout" text="変換" value="true" class="morph-section-foldout">
                <ui:VisualElement class="morph-section-panel">
                    <!-- メッシュ → モーフ -->
                    <ui:Label text="メッシュ → モーフ" class="morph-subsection-label" />
                    <ui:VisualElement class="morph-field-row">
                        <ui:Label text="対象" class="morph-field-label" />
                        <ui:VisualElement name="morph-source-mesh-container" class="morph-popup" />
                    </ui:VisualElement>
                    <ui:VisualElement class="morph-field-row">
                        <ui:Label text="モーフ名" class="morph-field-label" />
                        <ui:TextField name="morph-name-field" value="" class="morph-text-field" />
                    </ui:VisualElement>
                    <ui:VisualElement class="morph-field-row">
                        <ui:Label text="親メッシュ" class="morph-field-label" />
                        <ui:VisualElement name="morph-parent-container" class="morph-popup" />
                    </ui:VisualElement>
                    <ui:VisualElement class="morph-field-row">
                        <ui:Label text="パネル" class="morph-field-label" />
                        <ui:VisualElement name="morph-panel-container" class="morph-popup" />
                    </ui:VisualElement>
                    <ui:Button name="btn-mesh-to-morph" text="モーフに変換" class="morph-action-button" />
                    <!-- モーフ → メッシュ -->
                    <ui:Label text="モーフ → メッシュ" class="morph-subsection-label" style="margin-top: 8px;" />
                    <ui:VisualElement class="morph-field-row">
                        <ui:Label text="対象" class="morph-field-label" />
                        <ui:VisualElement name="morph-target-morph-container" class="morph-popup" />
                    </ui:VisualElement>
                    <ui:Button name="btn-morph-to-mesh" text="メッシュに戻す" class="morph-action-button" />
                </ui:VisualElement>
            </ui:Foldout>
            
            <!-- ======== 簡易モーフテスト ======== -->
            <ui:Foldout name="morph-test-foldout" text="簡易モーフテスト" value="true" class="morph-section-foldout">
                <ui:VisualElement class="morph-section-panel">
                    <ui:Label text="リストのチェックでテスト対象を選択" class="morph-info-label" />
                    <ui:VisualElement class="morph-field-row">
                        <ui:Label text="ウェイト" class="morph-field-label" />
                        <ui:Slider name="morph-test-weight" low-value="0" high-value="1" value="0" class="morph-test-slider" />
                    </ui:VisualElement>
                    <ui:VisualElement class="morph-test-buttons">
                        <ui:Button name="btn-morph-test-reset" text="リセット" class="morph-action-button-small" />
                        <ui:Button name="btn-morph-test-select-all" text="全選択" class="morph-action-button-small" />
                        <ui:Button name="btn-morph-test-deselect-all" text="全解除" class="morph-action-button-small" />
                    </ui:VisualElement>
                </ui:VisualElement>
            </ui:Foldout>
            
            <!-- ======== モーフセット ======== -->
            <ui:Foldout name="morph-set-foldout" text="モーフセット" value="false" class="morph-section-foldout">
                <ui:VisualElement class="morph-section-panel">
                    <ui:Label text="チェック済みモーフからセットを生成" class="morph-info-label" />
                    <ui:VisualElement class="morph-field-row">
                        <ui:Label text="セット名" class="morph-field-label" />
                        <ui:TextField name="morph-set-name-field" value="" class="morph-text-field" />
                    </ui:VisualElement>
                    <ui:VisualElement class="morph-field-row">
                        <ui:Label text="タイプ" class="morph-field-label" />
                        <ui:VisualElement name="morph-set-type-container" class="morph-popup" />
                    </ui:VisualElement>
                    <ui:Button name="btn-create-morph-set" text="モーフセット生成" class="morph-action-button" />
                </ui:VisualElement>
            </ui:Foldout>
            
            <!-- ステータス -->
            <ui:Label name="morph-status-label" text="" class="status-label" />
            
        </ui:VisualElement>
        
        <!-- ステータスバー -->
        <ui:Label name="status-label" text="" class="status-label" />
        
    </ui:VisualElement>
</ui:UXML>
